<% layout("/layouts/boilerplate") %>

<style>
  .btn-primary {
    background: #007bff;
    border: none;
  }

  .btn-primary:hover {
    background: #0056b3;
  }

  .skeleton-loader {
    background: linear-gradient(90deg, #eee 25%, #ddd 50%, #eee 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }

  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  /* Spinner positioned at top-left of skeleton */
  #loadingSpinner {
    width: 2rem;
    height: 2rem;
    color: #0056b3;
    border-width: 0.25rem;
    top: 1.25rem;
    left: 1.25rem;
  }
</style>

<div class="container d-flex justify-content-center mt-4 mb-5">
  <div>
    <h2 class="text-center mb-4 text-dark">Create Stunning AI Wallpapers</h2>

    <form id="imageForm" class="needs-validation" novalidate>
      <div class="mb-3">
        <textarea
          class="form-control"
          name="prompt"
          id="imagePrompt"
          placeholder="Describe your image..."
          required
        ></textarea>
        <div class="invalid-feedback">
          Please describe your image before generating.
        </div>
      </div>
      <button type="submit" class="btn btn-primary w-100" id="generateButton">
        Generate Wallpaper
      </button>
    </form>

    <div class="text-center mt-4 position-relative">
      <!-- Skeleton Loader -->
      <div
        id="imageSkeleton"
        class="skeleton-loader rounded shadow-sm w-100"
        style="height: 32.3rem; display: none"
      ></div>

      <!-- Spinner (Overlay - Top Left) -->
      <div
        id="loadingSpinner"
        class="spinner-border position-absolute"
        role="status"
        style="display: none"
      >
        <span class="visually-hidden">Generating...</span>
      </div>

      <!-- Generated Image -->
      <img
        id="generatedImage"
        class="img-fluid rounded shadow-sm mt-3"
        src=""
        alt="Generated AI Image"
        style="display: none; object-fit: cover"
      />

      <!-- Download Button -->
      <button
        class="btn btn-success w-100 mt-3"
        id="downloadButton"
        style="display: none"
      >
        Download Wallpaper
      </button>
    </div>
  </div>
</div>

<script src="/js/gen.js"></script>
